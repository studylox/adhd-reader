{"ast":null,"code":"var _jsxFileName = \"D:\\\\adhd-read-helper\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport * as pdfjsLib from 'pdfjs-dist';\nimport './styles/Reader.css';\n\n// 设置 PDF.js worker\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\npdfjsLib.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`;\nconst App = () => {\n  _s();\n  // 状态定义\n  const [isDarkMode, setIsDarkMode] = useState(true);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [pdfDocument, setPdfDocument] = useState(null);\n  const [content, setContent] = useState('');\n  const [readingMode, setReadingMode] = useState('static');\n  const [highlightColor, setHighlightColor] = useState('#ffeb3b');\n  const [readingSpeed, setReadingSpeed] = useState(200); // 阅读速度(ms/字)\n  const [isPlaying, setIsPlaying] = useState(false);\n  const readerContainerRef = useRef(null);\n  const guideRef = useRef(null);\n  const playIntervalRef = useRef(null);\n  const currentPositionRef = useRef({\n    paragraph: 0,\n    char: 0\n  });\n\n  // 初始化高亮颜色\n  useEffect(() => {\n    document.documentElement.style.setProperty('--highlight-color', highlightColor);\n  }, [highlightColor]);\n\n  // 清理定时器\n  useEffect(() => {\n    return () => {\n      if (playIntervalRef.current) {\n        clearInterval(playIntervalRef.current);\n      }\n    };\n  }, []);\n\n  // 处理PDF文件\n  const handlePdfFile = async file => {\n    try {\n      setLoading(true);\n      const fileURL = URL.createObjectURL(file);\n      const loadingTask = pdfjsLib.getDocument(fileURL);\n      const pdf = await loadingTask.promise;\n      setPdfDocument(pdf);\n      setTotalPages(pdf.numPages);\n      setCurrentPage(1);\n      await extractAndProcessPage(pdf, 1);\n    } catch (error) {\n      console.error('加载PDF时出错:', error);\n      alert('PDF加载失败，请尝试其他文件');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 提取和处理PDF页面\n  const extractAndProcessPage = async (pdf, pageNum) => {\n    try {\n      const page = await pdf.getPage(pageNum);\n      const textContent = await page.getTextContent();\n\n      // 按视觉顺序排列文本项\n      const sortedItems = [...textContent.items].sort((a, b) => {\n        if (Math.abs(b.transform[5] - a.transform[5]) < 5) {\n          return a.transform[4] - b.transform[4];\n        }\n        return b.transform[5] - a.transform[5];\n      });\n      let fullText = sortedItems.map(item => item.str).join('');\n      processTextForDisplay(fullText);\n    } catch (error) {\n      console.error('处理PDF页面时出错:', error);\n      setContent('<div>无法处理PDF内容</div>');\n    }\n  };\n\n  // 处理文本显示\n  const processTextForDisplay = text => {\n    // 分割段落\n    const paragraphs = text.split(/\\n+/).filter(p => p.trim());\n\n    // 生成HTML内容\n    let htmlContent = '<div class=\"content-container\">';\n    paragraphs.forEach((para, pIndex) => {\n      // 分割句子\n      const sentences = para.split(/([。！？.!?])/).filter(s => s.trim());\n      htmlContent += `<p class=\"paragraph\" data-index=\"${pIndex}\">`;\n      sentences.forEach((sentence, sIndex) => {\n        // 随机高亮部分名词\n        const highlighted = sentence.replace(/([\\u4e00-\\u9fa5]{2,})/g, match => {\n          return Math.random() < 0.3 ? `<span class=\"highlight-word\">${match}</span>` : match;\n        });\n        htmlContent += highlighted;\n        if (sIndex < sentences.length - 1) {\n          htmlContent += '<span class=\"sentence-break\"></span>';\n        }\n      });\n      htmlContent += '</p>';\n    });\n    htmlContent += '</div>';\n    setContent(htmlContent);\n  };\n\n  // 处理TXT文件\n  const handleTxtFile = async file => {\n    try {\n      setLoading(true);\n      const text = await file.text();\n      processTextForDisplay(text);\n      setTotalPages(1);\n      setCurrentPage(1);\n    } catch (error) {\n      console.error('TXT处理错误:', error);\n      alert('TXT文件处理失败，请重试');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 文件上传处理\n  const handleFileUpload = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    if (file.type === 'application/pdf') {\n      await handlePdfFile(file);\n    } else if (file.type === 'text/plain') {\n      await handleTxtFile(file);\n    } else {\n      alert('请上传PDF或TXT文件');\n    }\n  };\n\n  // 翻页函数\n  const changePage = async delta => {\n    const newPage = currentPage + delta;\n    if (newPage >= 1 && newPage <= totalPages && pdfDocument) {\n      setCurrentPage(newPage);\n      await extractAndProcessPage(pdfDocument, newPage);\n    }\n  };\n\n  // 设置鼠标跟随高亮\n  const setupMouseFollowHighlight = () => {\n    const container = readerContainerRef.current;\n    if (!container) return;\n    const handleMouseMove = e => {\n      const paragraphs = container.querySelectorAll('.paragraph');\n      paragraphs.forEach(para => {\n        const rect = para.getBoundingClientRect();\n        para.classList.toggle('active-line', e.clientY >= rect.top && e.clientY <= rect.bottom);\n      });\n    };\n    container.addEventListener('mousemove', handleMouseMove);\n    return () => container.removeEventListener('mousemove', handleMouseMove);\n  };\n\n  // 自动阅读控制\n  const toggleAutoRead = () => {\n    if (isPlaying) {\n      stopAutoRead();\n    } else {\n      startAutoRead();\n    }\n  };\n  const startAutoRead = () => {\n    if (!guideRef.current) {\n      guideRef.current = document.createElement('div');\n      guideRef.current.className = 'reading-guide';\n      readerContainerRef.current.appendChild(guideRef.current);\n    }\n    setIsPlaying(true);\n    playIntervalRef.current = setInterval(moveReadingGuide, readingSpeed);\n  };\n  const stopAutoRead = () => {\n    setIsPlaying(false);\n    if (playIntervalRef.current) {\n      clearInterval(playIntervalRef.current);\n    }\n    if (guideRef.current) {\n      guideRef.current.style.display = 'none';\n    }\n  };\n\n  // 移动阅读引导线\n  const moveReadingGuide = () => {\n    var _readerContainerRef$c;\n    const paragraphs = (_readerContainerRef$c = readerContainerRef.current) === null || _readerContainerRef$c === void 0 ? void 0 : _readerContainerRef$c.querySelectorAll('.paragraph');\n    if (!paragraphs || paragraphs.length === 0) {\n      stopAutoRead();\n      return;\n    }\n    let {\n      paragraph: pIdx,\n      char: cIdx\n    } = currentPositionRef.current;\n    const currentPara = paragraphs[pIdx];\n    const text = (currentPara === null || currentPara === void 0 ? void 0 : currentPara.textContent) || '';\n\n    // 移动到下一个字符\n    cIdx++;\n\n    // 如果到达段落末尾，移动到下一段\n    if (cIdx >= text.length) {\n      pIdx++;\n      cIdx = 0;\n\n      // 如果到达最后一段，回到开头\n      if (pIdx >= paragraphs.length) {\n        pIdx = 0;\n        if (readingMode !== 'auto-guide') {\n          stopAutoRead();\n          return;\n        }\n      }\n\n      // 滚动到当前段落\n      paragraphs[pIdx].scrollIntoView({\n        behavior: 'smooth',\n        block: 'center'\n      });\n    }\n\n    // 更新位置\n    currentPositionRef.current = {\n      paragraph: pIdx,\n      char: cIdx\n    };\n\n    // 更新引导线位置\n    if (guideRef.current && currentPara) {\n      const range = document.createRange();\n      const textNode = currentPara.firstChild;\n      if (textNode && textNode.nodeType === Node.TEXT_NODE) {\n        try {\n          range.setStart(textNode, Math.min(cIdx, textNode.length));\n          range.collapse(true);\n          const rect = range.getBoundingClientRect();\n          const containerRect = readerContainerRef.current.getBoundingClientRect();\n          guideRef.current.style.display = 'block';\n          guideRef.current.style.left = `${rect.left - containerRect.left}px`;\n          guideRef.current.style.top = `${rect.bottom - containerRect.top + 2}px`;\n\n          // 闪烁效果\n          guideRef.current.style.opacity = '1';\n          setTimeout(() => {\n            if (guideRef.current) guideRef.current.style.opacity = '0.7';\n          }, 100);\n        } catch (e) {\n          console.error('更新引导线位置出错:', e);\n        }\n      }\n    }\n  };\n\n  // 阅读模式切换\n  const handleReadingModeChange = mode => {\n    setReadingMode(mode);\n\n    // 停止当前的自动阅读\n    if (isPlaying) stopAutoRead();\n\n    // 重置位置\n    currentPositionRef.current = {\n      paragraph: 0,\n      char: 0\n    };\n\n    // 根据模式设置\n    if (mode === 'follow-mouse') {\n      // 移除之前的引导线\n      if (guideRef.current) {\n        guideRef.current.remove();\n        guideRef.current = null;\n      }\n\n      // 设置鼠标跟随高亮\n      setTimeout(() => {\n        const cleanup = setupMouseFollowHighlight();\n        return () => cleanup && cleanup();\n      }, 100);\n    }\n  };\n\n  // 当阅读模式或内容变化时重新设置\n  useEffect(() => {\n    if (readingMode === 'follow-mouse') {\n      const cleanup = setupMouseFollowHighlight();\n      return () => cleanup && cleanup();\n    } else if (readingMode === 'auto-guide' && isPlaying) {\n      startAutoRead();\n    }\n  }, [readingMode, content]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `App ${isDarkMode ? 'dark' : 'light'}`,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"ADHD \\u9605\\u8BFB\\u52A9\\u624B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"controls\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"upload-btn\",\n            onClick: () => document.getElementById('fileInput').click(),\n            children: \"\\u9009\\u62E9\\u6587\\u4EF6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"fileInput\",\n            type: \"file\",\n            accept: \".pdf,.txt\",\n            style: {\n              display: 'none'\n            },\n            onChange: handleFileUpload\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"mode-btn\",\n            onClick: () => setIsDarkMode(!isDarkMode),\n            children: isDarkMode ? '明亮模式' : '暗黑模式'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"color-picker\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u9AD8\\u4EAE\\u989C\\u8272:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"color\",\n              value: highlightColor,\n              onChange: e => setHighlightColor(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mode-selector\",\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              value: readingMode,\n              onChange: e => handleReadingModeChange(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"static\",\n                children: \"\\u9AD8\\u4EAE\\u9759\\u606F\\u6A21\\u5F0F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"follow-mouse\",\n                children: \"\\u9F20\\u6807\\u8DDF\\u968F\\u9AD8\\u4EAE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"auto-guide\",\n                children: \"\\u81EA\\u52A8\\u9605\\u8BFB\\u5F15\\u5BFC\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 15\n            }, this), readingMode === 'auto-guide' && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: `play-btn ${isPlaying ? 'playing' : ''}`,\n                onClick: toggleAutoRead,\n                children: isPlaying ? '暂停' : '播放'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"speed-control\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"\\u901F\\u5EA6:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"range\",\n                  min: \"50\",\n                  max: \"500\",\n                  step: \"50\",\n                  value: readingSpeed,\n                  onChange: e => setReadingSpeed(parseInt(e.target.value))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 365,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"page-content\",\n        ref: readerContainerRef,\n        children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading\",\n          children: \"\\u52A0\\u8F7D\\u4E2D...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 13\n        }, this) : content ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            dangerouslySetInnerHTML: {\n              __html: content\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 15\n          }, this), totalPages > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"nav-buttons\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"nav-button\",\n              onClick: () => changePage(-1),\n              disabled: currentPage <= 1,\n              children: \"\\u4E0A\\u4E00\\u9875\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\u7B2C \", currentPage, \" / \", totalPages, \" \\u9875\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"nav-button\",\n              onClick: () => changePage(1),\n              disabled: currentPage >= totalPages,\n              children: \"\\u4E0B\\u4E00\\u9875\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-state\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u8BF7\\u4E0A\\u4F20PDF\\u6216TXT\\u6587\\u4EF6\\u5F00\\u59CB\\u9605\\u8BFB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"upload-btn\",\n            onClick: () => document.getElementById('fileInput').click(),\n            children: \"\\u9009\\u62E9\\u6587\\u4EF6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 310,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"+LjKFEuMEvByNIfekzKnbLlJSXU=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useRef","useEffect","pdfjsLib","jsxDEV","_jsxDEV","Fragment","_Fragment","GlobalWorkerOptions","workerSrc","version","App","_s","isDarkMode","setIsDarkMode","currentPage","setCurrentPage","totalPages","setTotalPages","loading","setLoading","pdfDocument","setPdfDocument","content","setContent","readingMode","setReadingMode","highlightColor","setHighlightColor","readingSpeed","setReadingSpeed","isPlaying","setIsPlaying","readerContainerRef","guideRef","playIntervalRef","currentPositionRef","paragraph","char","document","documentElement","style","setProperty","current","clearInterval","handlePdfFile","file","fileURL","URL","createObjectURL","loadingTask","getDocument","pdf","promise","numPages","extractAndProcessPage","error","console","alert","pageNum","page","getPage","textContent","getTextContent","sortedItems","items","sort","a","b","Math","abs","transform","fullText","map","item","str","join","processTextForDisplay","text","paragraphs","split","filter","p","trim","htmlContent","forEach","para","pIndex","sentences","s","sentence","sIndex","highlighted","replace","match","random","length","handleTxtFile","handleFileUpload","e","target","files","type","changePage","delta","newPage","setupMouseFollowHighlight","container","handleMouseMove","querySelectorAll","rect","getBoundingClientRect","classList","toggle","clientY","top","bottom","addEventListener","removeEventListener","toggleAutoRead","stopAutoRead","startAutoRead","createElement","className","appendChild","setInterval","moveReadingGuide","display","_readerContainerRef$c","pIdx","cIdx","currentPara","scrollIntoView","behavior","block","range","createRange","textNode","firstChild","nodeType","Node","TEXT_NODE","setStart","min","collapse","containerRect","left","opacity","setTimeout","handleReadingModeChange","mode","remove","cleanup","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","getElementById","click","id","accept","onChange","value","max","step","parseInt","ref","dangerouslySetInnerHTML","__html","disabled","_c","$RefreshReg$"],"sources":["D:/adhd-read-helper/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport * as pdfjsLib from 'pdfjs-dist';\nimport './styles/Reader.css';\n\n// 设置 PDF.js worker\npdfjsLib.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`;\n\nconst App = () => {\n  // 状态定义\n  const [isDarkMode, setIsDarkMode] = useState(true);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [pdfDocument, setPdfDocument] = useState(null);\n  const [content, setContent] = useState('');\n  const [readingMode, setReadingMode] = useState('static');\n  const [highlightColor, setHighlightColor] = useState('#ffeb3b');\n  const [readingSpeed, setReadingSpeed] = useState(200); // 阅读速度(ms/字)\n  const [isPlaying, setIsPlaying] = useState(false);\n  \n  const readerContainerRef = useRef(null);\n  const guideRef = useRef(null);\n  const playIntervalRef = useRef(null);\n  const currentPositionRef = useRef({ paragraph: 0, char: 0 });\n\n  // 初始化高亮颜色\n  useEffect(() => {\n    document.documentElement.style.setProperty('--highlight-color', highlightColor);\n  }, [highlightColor]);\n\n  // 清理定时器\n  useEffect(() => {\n    return () => {\n      if (playIntervalRef.current) {\n        clearInterval(playIntervalRef.current);\n      }\n    };\n  }, []);\n\n  // 处理PDF文件\n  const handlePdfFile = async (file) => {\n    try {\n      setLoading(true);\n      const fileURL = URL.createObjectURL(file);\n      const loadingTask = pdfjsLib.getDocument(fileURL);\n      const pdf = await loadingTask.promise;\n      \n      setPdfDocument(pdf);\n      setTotalPages(pdf.numPages);\n      setCurrentPage(1);\n      \n      await extractAndProcessPage(pdf, 1);\n    } catch (error) {\n      console.error('加载PDF时出错:', error);\n      alert('PDF加载失败，请尝试其他文件');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 提取和处理PDF页面\n  const extractAndProcessPage = async (pdf, pageNum) => {\n    try {\n      const page = await pdf.getPage(pageNum);\n      const textContent = await page.getTextContent();\n      \n      // 按视觉顺序排列文本项\n      const sortedItems = [...textContent.items].sort((a, b) => {\n        if (Math.abs(b.transform[5] - a.transform[5]) < 5) {\n          return a.transform[4] - b.transform[4];\n        }\n        return b.transform[5] - a.transform[5];\n      });\n      \n      let fullText = sortedItems.map(item => item.str).join('');\n      processTextForDisplay(fullText);\n    } catch (error) {\n      console.error('处理PDF页面时出错:', error);\n      setContent('<div>无法处理PDF内容</div>');\n    }\n  };\n\n  // 处理文本显示\n  const processTextForDisplay = (text) => {\n    // 分割段落\n    const paragraphs = text.split(/\\n+/).filter(p => p.trim());\n    \n    // 生成HTML内容\n    let htmlContent = '<div class=\"content-container\">';\n    \n    paragraphs.forEach((para, pIndex) => {\n      // 分割句子\n      const sentences = para.split(/([。！？.!?])/).filter(s => s.trim());\n      \n      htmlContent += `<p class=\"paragraph\" data-index=\"${pIndex}\">`;\n      \n      sentences.forEach((sentence, sIndex) => {\n        // 随机高亮部分名词\n        const highlighted = sentence.replace(/([\\u4e00-\\u9fa5]{2,})/g, (match) => {\n          return Math.random() < 0.3 ? \n            `<span class=\"highlight-word\">${match}</span>` : match;\n        });\n        \n        htmlContent += highlighted;\n        if (sIndex < sentences.length - 1) {\n          htmlContent += '<span class=\"sentence-break\"></span>';\n        }\n      });\n      \n      htmlContent += '</p>';\n    });\n    \n    htmlContent += '</div>';\n    setContent(htmlContent);\n  };\n\n  // 处理TXT文件\n  const handleTxtFile = async (file) => {\n    try {\n      setLoading(true);\n      const text = await file.text();\n      processTextForDisplay(text);\n      setTotalPages(1);\n      setCurrentPage(1);\n    } catch (error) {\n      console.error('TXT处理错误:', error);\n      alert('TXT文件处理失败，请重试');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 文件上传处理\n  const handleFileUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n    \n    if (file.type === 'application/pdf') {\n      await handlePdfFile(file);\n    } else if (file.type === 'text/plain') {\n      await handleTxtFile(file);\n    } else {\n      alert('请上传PDF或TXT文件');\n    }\n  };\n\n  // 翻页函数\n  const changePage = async (delta) => {\n    const newPage = currentPage + delta;\n    if (newPage >= 1 && newPage <= totalPages && pdfDocument) {\n      setCurrentPage(newPage);\n      await extractAndProcessPage(pdfDocument, newPage);\n    }\n  };\n\n  // 设置鼠标跟随高亮\n  const setupMouseFollowHighlight = () => {\n    const container = readerContainerRef.current;\n    if (!container) return;\n\n    const handleMouseMove = (e) => {\n      const paragraphs = container.querySelectorAll('.paragraph');\n      paragraphs.forEach(para => {\n        const rect = para.getBoundingClientRect();\n        para.classList.toggle('active-line', \n          e.clientY >= rect.top && e.clientY <= rect.bottom\n        );\n      });\n    };\n\n    container.addEventListener('mousemove', handleMouseMove);\n    return () => container.removeEventListener('mousemove', handleMouseMove);\n  };\n\n  // 自动阅读控制\n  const toggleAutoRead = () => {\n    if (isPlaying) {\n      stopAutoRead();\n    } else {\n      startAutoRead();\n    }\n  };\n\n  const startAutoRead = () => {\n    if (!guideRef.current) {\n      guideRef.current = document.createElement('div');\n      guideRef.current.className = 'reading-guide';\n      readerContainerRef.current.appendChild(guideRef.current);\n    }\n    \n    setIsPlaying(true);\n    playIntervalRef.current = setInterval(moveReadingGuide, readingSpeed);\n  };\n\n  const stopAutoRead = () => {\n    setIsPlaying(false);\n    if (playIntervalRef.current) {\n      clearInterval(playIntervalRef.current);\n    }\n    if (guideRef.current) {\n      guideRef.current.style.display = 'none';\n    }\n  };\n\n  // 移动阅读引导线\n  const moveReadingGuide = () => {\n    const paragraphs = readerContainerRef.current?.querySelectorAll('.paragraph');\n    if (!paragraphs || paragraphs.length === 0) {\n      stopAutoRead();\n      return;\n    }\n\n    let { paragraph: pIdx, char: cIdx } = currentPositionRef.current;\n    const currentPara = paragraphs[pIdx];\n    const text = currentPara?.textContent || '';\n    \n    // 移动到下一个字符\n    cIdx++;\n    \n    // 如果到达段落末尾，移动到下一段\n    if (cIdx >= text.length) {\n      pIdx++;\n      cIdx = 0;\n      \n      // 如果到达最后一段，回到开头\n      if (pIdx >= paragraphs.length) {\n        pIdx = 0;\n        if (readingMode !== 'auto-guide') {\n          stopAutoRead();\n          return;\n        }\n      }\n      \n      // 滚动到当前段落\n      paragraphs[pIdx].scrollIntoView({ \n        behavior: 'smooth', \n        block: 'center' \n      });\n    }\n    \n    // 更新位置\n    currentPositionRef.current = { paragraph: pIdx, char: cIdx };\n    \n    // 更新引导线位置\n    if (guideRef.current && currentPara) {\n      const range = document.createRange();\n      const textNode = currentPara.firstChild;\n      \n      if (textNode && textNode.nodeType === Node.TEXT_NODE) {\n        try {\n          range.setStart(textNode, Math.min(cIdx, textNode.length));\n          range.collapse(true);\n          \n          const rect = range.getBoundingClientRect();\n          const containerRect = readerContainerRef.current.getBoundingClientRect();\n          \n          guideRef.current.style.display = 'block';\n          guideRef.current.style.left = `${rect.left - containerRect.left}px`;\n          guideRef.current.style.top = `${rect.bottom - containerRect.top + 2}px`;\n          \n          // 闪烁效果\n          guideRef.current.style.opacity = '1';\n          setTimeout(() => {\n            if (guideRef.current) guideRef.current.style.opacity = '0.7';\n          }, 100);\n        } catch (e) {\n          console.error('更新引导线位置出错:', e);\n        }\n      }\n    }\n  };\n\n  // 阅读模式切换\n  const handleReadingModeChange = (mode) => {\n    setReadingMode(mode);\n    \n    // 停止当前的自动阅读\n    if (isPlaying) stopAutoRead();\n    \n    // 重置位置\n    currentPositionRef.current = { paragraph: 0, char: 0 };\n    \n    // 根据模式设置\n    if (mode === 'follow-mouse') {\n      // 移除之前的引导线\n      if (guideRef.current) {\n        guideRef.current.remove();\n        guideRef.current = null;\n      }\n      \n      // 设置鼠标跟随高亮\n      setTimeout(() => {\n        const cleanup = setupMouseFollowHighlight();\n        return () => cleanup && cleanup();\n      }, 100);\n    }\n  };\n\n  // 当阅读模式或内容变化时重新设置\n  useEffect(() => {\n    if (readingMode === 'follow-mouse') {\n      const cleanup = setupMouseFollowHighlight();\n      return () => cleanup && cleanup();\n    } else if (readingMode === 'auto-guide' && isPlaying) {\n      startAutoRead();\n    }\n  }, [readingMode, content]);\n\n  return (\n    <div className={`App ${isDarkMode ? 'dark' : 'light'}`}>\n      <div className=\"app-container\">\n        <header className=\"header\">\n          <h1>ADHD 阅读助手</h1>\n          <div className=\"controls\">\n            <button \n              className=\"upload-btn\"\n              onClick={() => document.getElementById('fileInput').click()}\n            >\n              选择文件\n            </button>\n            <input\n              id=\"fileInput\"\n              type=\"file\"\n              accept=\".pdf,.txt\"\n              style={{ display: 'none' }}\n              onChange={handleFileUpload}\n            />\n            \n            <button \n              className=\"mode-btn\"\n              onClick={() => setIsDarkMode(!isDarkMode)}\n            >\n              {isDarkMode ? '明亮模式' : '暗黑模式'}\n            </button>\n            \n            <div className=\"color-picker\">\n              <label>高亮颜色:</label>\n              <input \n                type=\"color\" \n                value={highlightColor}\n                onChange={(e) => setHighlightColor(e.target.value)}\n              />\n            </div>\n            \n            <div className=\"mode-selector\">\n              <select \n                value={readingMode}\n                onChange={(e) => handleReadingModeChange(e.target.value)}\n              >\n                <option value=\"static\">高亮静息模式</option>\n                <option value=\"follow-mouse\">鼠标跟随高亮</option>\n                <option value=\"auto-guide\">自动阅读引导</option>\n              </select>\n              \n              {readingMode === 'auto-guide' && (\n                <>\n                  <button \n                    className={`play-btn ${isPlaying ? 'playing' : ''}`}\n                    onClick={toggleAutoRead}\n                  >\n                    {isPlaying ? '暂停' : '播放'}\n                  </button>\n                  <div className=\"speed-control\">\n                    <label>速度:</label>\n                    <input\n                      type=\"range\"\n                      min=\"50\"\n                      max=\"500\"\n                      step=\"50\"\n                      value={readingSpeed}\n                      onChange={(e) => setReadingSpeed(parseInt(e.target.value))}\n                    />\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n        </header>\n        \n        <main \n          className=\"page-content\"\n          ref={readerContainerRef}\n        >\n          {loading ? (\n            <div className=\"loading\">加载中...</div>\n          ) : content ? (\n            <>\n              <div dangerouslySetInnerHTML={{ __html: content }} />\n              \n              {totalPages > 1 && (\n                <div className=\"nav-buttons\">\n                  <button \n                    className=\"nav-button\" \n                    onClick={() => changePage(-1)} \n                    disabled={currentPage <= 1}\n                  >\n                    上一页\n                  </button>\n                  <span>第 {currentPage} / {totalPages} 页</span>\n                  <button \n                    className=\"nav-button\" \n                    onClick={() => changePage(1)} \n                    disabled={currentPage >= totalPages}\n                  >\n                    下一页\n                  </button>\n                </div>\n              )}\n            </>\n          ) : (\n            <div className=\"empty-state\">\n              <p>请上传PDF或TXT文件开始阅读</p>\n              <button \n                className=\"upload-btn\"\n                onClick={() => document.getElementById('fileInput').click()}\n              >\n                选择文件\n              </button>\n            </div>\n          )}\n        </main>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}